define("local_datacurso/course_streaming",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.startStreaming=void 0;
/**
   * Course Streaming Module for handling real-time course generation
   *
   * @module     local_datacurso/course_streaming
   * @copyright  2025 Buendata <soluciones@buendata.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
let htmlBuffer="",rafPending=!1;_exports.startStreaming=async(streamingUrl,container)=>{const progressIndicator=container.querySelector("[data-region='local_datacurso/course_streaming/progress']"),eventList=container.querySelector("[data-region='local_datacurso/course_streaming']"),progressIcon=container.querySelector("[data-region='local_datacurso/course_streaming/progress/icon']");eventList.innerHTML="",progressIndicator&&(progressIndicator.style.display="block");const evtSource=new EventSource(streamingUrl);evtSource.addEventListener("assistant_token",(event=>{!function(token,container){htmlBuffer+=token,function(container){if(rafPending)return;rafPending=!0,requestAnimationFrame((()=>{rafPending=!1,container.innerHTML=htmlBuffer,container.scrollTop=container.scrollHeight}))}(container)}(event.data,eventList)})),evtSource.addEventListener("assistant_message_end",(()=>{progressIcon.innerHTML='\n        <div class="bg-success rounded-circle d-flex align-items-center justify-content-center" style="width: 1.5rem; height: 1.5rem;">\n          <i class="text-white" style="font-size: 0.8rem;">âœ“</i>\n        </div>\n      ';const planningActions=document.getElementById("course-planning-actions");planningActions&&(planningActions.style.display="block"),evtSource.close()}))}}));

//# sourceMappingURL=course_streaming.min.js.map